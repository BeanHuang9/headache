<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>豆子擊退頭痛日誌</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" href="assets/img/icon.png" />
    <link rel="apple-touch-icon" href="assets/img/icon.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="assets/img/icon.png" />
    <link rel="apple-touch-icon" href="assets/img/icon.png" />

    <link
      href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&family=Plus+Jakarta+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* ========= 基礎字體 ========= */
      /* ====== 日系雜誌感 × 薄荷清爽版 字體設定 ====== */
      body {
        font-family: 'Kiwi Maru', 'Plus Jakarta Sans', 'Noto Sans TC', 'PingFang TC',
          'Microsoft JhengHei', sans-serif;

        letter-spacing: 0.015em; /* 雜誌感必備微字距 */
        line-height: 1.6; /* 留白感＋易讀性 */

        -webkit-font-smoothing: antialiased;
      }

      h1,
      h2,
      .title {
        font-family: 'Kiwi Maru', sans-serif;
        font-weight: 500;
        letter-spacing: 0.03em;
      }

      .section-title {
        font-family: 'Plus Jakarta Sans', 'Kiwi Maru', sans-serif;
        font-weight: 600;
        letter-spacing: 0.04em;
      }

      p.text-sm,
      p.text-xs,
      .hint,
      input::placeholder {
        font-family: 'Noto Sans TC', 'Kiwi Maru', sans-serif;
        color: #7f8c8d;
        letter-spacing: 0.01em;
      }

      button,
      .btn-primary,
      .btn-secondary {
        font-family: 'Plus Jakarta Sans', sans-serif;
        font-weight: 600;
        letter-spacing: 0.03em;
      }

      /* ========= 背景：薄荷玻璃高級療癒感 ========= */
      body.bg-gray-50 {
        /* 蓋掉 Tailwind 的灰底，改成漸層 */
        background: radial-gradient(circle at 0% 0%, rgba(148, 227, 203, 0.4), transparent 55%),
          radial-gradient(circle at 100% 100%, rgba(124, 201, 255, 0.35), transparent 55%),
          linear-gradient(180deg, #f7fcfb 0%, #ecf9ff 100%);
        color: #1f2933;
      }

      /* ========= 整體容器一點點空間感 ========= */
      .max-w-3xl {
        position: relative;
        z-index: 1;
      }

      /* ========= 卡片：玻璃感 & 薄荷邊 ========= */
      .card {
        background: rgba(255, 255, 255, 0.86);
        backdrop-filter: blur(18px);
        -webkit-backdrop-filter: blur(18px);
        border-radius: 22px; /* 比原本更圓一點 */
        border: 1px solid rgba(188, 233, 220, 0.9);
        box-shadow: 0 18px 45px rgba(15, 116, 92, 0.12), 0 0 0 1px rgba(255, 255, 255, 0.8);
      }

      /* 標題區：icon + Before / After 那條 */
      .card > .text-xl {
        color: #146a60;
      }

      .card svg.h-6.w-6.text-primary-indigo {
        color: #26a894; /* 換成薄荷主色 */
      }

      /* Before / After 小 badge 改成薄荷膠囊 */
      .card span.bg-indigo-100.text-primary-indigo {
        background: rgba(38, 168, 148, 0.12);
        color: #1f9a85;
        border-radius: 999px;
      }

      /* ========= 隱藏 number 的上下箭頭 ========= */
      input[type='number']::-webkit-inner-spin-button,
      input[type='number']::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      /* ========= icon radio group：只負責把 radio 本體藏起來 ========= */
      .icon-radio-group input[type='radio'] {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
      }

      /* ========= input-with-icon：薄荷微膠囊，不破版版本 ========= */
      .input-with-icon {
        display: flex;
        align-items: center;
        position: relative;
        background: rgba(255, 255, 255, 0.92);
        border: 1px solid #cdece4; /* 薄荷系邊框 */
        border-radius: 14px; /* 微膠囊 */
        padding: 0.4rem 0.75rem;
        transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
      }

      .input-with-icon:focus-within {
        border-color: #26a894;
        box-shadow: 0 0 0 3px rgba(38, 168, 148, 0.25);
        background-color: rgba(255, 255, 255, 0.98);
      }

      /* 讓內部 input / select 自己吃 Tailwind 上的 pl-14 / pl-16，不再強制改 padding-left */
      .input-with-icon input,
      .input-with-icon select {
        flex-grow: 1;
        border: none;
        background: transparent;
        font-size: 0.95rem;
      }

      .input-with-icon input:focus,
      .input-with-icon select:focus {
        outline: none;
        box-shadow: none;
      }

      /* 單位文字 (bpm / 分) 薄荷色 */
      .input-with-icon .unit {
        flex-shrink: 0;
        margin-left: 0.25rem;
        margin-right: 0.25rem;
        color: #26a894;
        font-weight: 600;
        font-size: 0.8rem;
      }

      /* ========= 標籤與提示文字 ========= */
      label.block.text-sm {
        color: #4b5563;
        font-weight: 500;
      }

      p.text-xs.text-gray-500 {
        color: #9ca3af;
      }

      /* ========= 頁面主標題稍微更有存在感 ========= */
      h1.text-3xl {
        color: #124f45;
        letter-spacing: 0.04em;
        text-shadow: 0 2px 6px rgba(10, 96, 80, 0.14);
      }

      /* ========= 按鈕區：套在你現有的 class 上 ========= */

      /* 查看資料表：改成薄荷 outline 膠囊 */
      a[href*='spreadsheets'] {
        border-radius: 999px;
        border: 1px solid #8ad9c4;
        background: rgba(255, 255, 255, 0.9);
        color: #137c69;
        box-shadow: 0 4px 14px rgba(19, 124, 105, 0.12);
      }
      a[href*='spreadsheets']:hover {
        background: #e6f9f4;
      }

      /* 清除重填：柔灰膠囊 + 淡薄荷邊 */
      .btn-secondary {
        border-radius: 999px;
        border: 1px solid #d1d5db;
        background: rgba(248, 250, 252, 0.92);
      }
      .btn-secondary:hover {
        background: #e5e7eb;
      }

      /* 送出記錄：主薄荷膠囊 */
      .btn-primary {
        border-radius: 999px;
        background: linear-gradient(135deg, #26a894, #3bc4aa);
        box-shadow: 0 10px 24px rgba(12, 116, 96, 0.35);
      }
      .btn-primary:hover {
        background: linear-gradient(135deg, #1f9a85, #32b49b);
        box-shadow: 0 12px 28px rgba(12, 116, 96, 0.42);
        transform: translateY(-1px);
      }

      /* ====== 按鈕列：手機版三等份不換行 ====== */
.button-row {
  display: flex;
  gap: 0.75rem;
}

.button-row > * {
  flex: 1 1 0%;        /* 三等份 */
  text-align: center;
  white-space: nowrap; /* 禁止自動換行 */
}

/* 按鈕內文字自動縮小，避免長字換行 */
.button-row button,
.button-row a {
  padding: 0.75rem 0.5rem;
  font-size: 0.95rem;
}


      /* ========= 狀態訊息 ========= */
      .status-message {
        letter-spacing: 0.02em;
      }
    </style>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'primary-indigo': '#4f46e5',
            },
          },
        },
      };
    </script>
  </head>
  <body class="bg-gray-50 text-gray-800 antialiased min-h-screen">
    <div class="max-w-3xl mx-auto p-4 sm:p-6 lg:p-10">
      <h1 class="text-center text-3xl font-normal text-primary-indigo mb-2 mt-4">
        豆子擊退頭痛日誌
      </h1>
      <p class="text-center text-sm text-gray-500 mb-8">慢跑前後的身體與心情，通通一起記下來。</p>

      <!-- Web App URL (請替換為您的 Google Script URL) -->
      <script>
        const WEB_APP_URL =
          'https://script.google.com/macros/s/AKfycbzAIoupjXUklcZUV6DsBa0gRp859BaXkn--xUR6jIrSECBcHsoCVg2iT93j910t41bW/exec';
      </script>

      <!-- 運動前評估 Card -->
      <div class="card bg-white rounded-xl shadow-xl p-5 sm:p-6 mb-6">
        <div class="text-xl font-normal mb-4 flex items-center gap-3 text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-primary-indigo"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          運動前評估
          <span class="text-xs px-3 py-1 bg-indigo-100 text-primary-indigo font-medium rounded-full"
            >Before</span
          >
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-x-6 gap-y-4">
          <!-- 運動日期與時間 (日曆圖示) -->
          <div class="form-group col-span-full md:col-span-1">
            <label for="exerciseDate" class="block text-sm font-medium text-gray-700 mb-1"
              >運動日期與時間</label
            >
            <div
              class="input-with-icon border-indigo-200 focus-within:border-primary-indigo focus-within:shadow-indigo-100"
            >
              <div class="icon-container absolute left-3 top-1/2 -translate-y-1/2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M8 7V3m8 4V3m-9 8h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input type="datetime-local" id="exerciseDate" class="w-full p-2 pl-8" />
            </div>
          </div>
        </div>

        <!-- 身體狀況：使用圖示 Radio Group (不變) -->
        <div class="form-group mt-4 col-span-full">
          <label class="block text-sm font-medium text-gray-700 mb-2">運動前身體狀況</label>
          <div
            id="bodyStatusBeforeGroup"
            class="icon-radio-group flex justify-start space-x-2 sm:space-x-4"
          >
            <!-- 非常好 (綠色) -->
            <label for="status-before-1" class="cursor-pointer group">
              <input
                type="radio"
                id="status-before-1"
                name="bodyStatusBefore"
                value="非常好"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-green-600 peer-checked:bg-green-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-green-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 34 40 32 28"
                      stroke="#4CAF50"
                      stroke-width="4"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 28C26 20 14 22 10 28C14 34 26 32 32 28Z" fill="#4CAF50"></path>
                    <path d="M32 28C38 20 50 22 54 28C50 34 38 32 32 28Z" fill="#4CAF50"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">非常好</span>
              </div>
            </label>

            <!-- 良好 (淺綠色) -->
            <label for="status-before-2" class="cursor-pointer group">
              <input
                type="radio"
                id="status-before-2"
                name="bodyStatusBefore"
                value="良好"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-lime-600 peer-checked:bg-lime-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-lime-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-lime-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 33 42 32 32"
                      stroke="#8BC34A"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 32C27 26 18 27 15 31C18 35 27 34 32 32Z" fill="#8BC34A"></path>
                    <path d="M32 32C37 26 46 27 49 31C46 35 37 34 32 32Z" fill="#8BC34A"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">良好</span>
              </div>
            </label>

            <!-- 一般 (黃綠色) -->
            <label for="status-before-3" class="cursor-pointer group">
              <input
                type="radio"
                id="status-before-3"
                name="bodyStatusBefore"
                value="一般"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-yellow-500 peer-checked:bg-yellow-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-yellow-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 30 44 32 36"
                      stroke="#CDDC39"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 36C28 32 20 34 18 38C20 41 28 40 32 36Z" fill="#CDDC39"></path>
                    <path d="M32 36C36 32 44 34 46 38C44 41 36 40 32 36Z" fill="#CDDC39"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">一般</span>
              </div>
            </label>

            <!-- 較差 (橘色) -->
            <label for="status-before-4" class="cursor-pointer group">
              <input
                type="radio"
                id="status-before-4"
                name="bodyStatusBefore"
                value="較差"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-orange-600 peer-checked:bg-orange-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-orange-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 26 48 28 40"
                      stroke="#FFC107"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M28 40C24 38 18 42 17 45C20 47 26 44 28 40Z" fill="#FFC107"></path>
                    <path d="M28 40C32 38 38 42 39 45C36 47 30 44 28 40Z" fill="#FF9800"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">較差</span>
              </div>
            </label>

            <!-- 很差 (深棕色/灰色) -->
            <label for="status-before-5" class="cursor-pointer group">
              <input
                type="radio"
                id="status-before-5"
                name="bodyStatusBefore"
                value="很差"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-gray-500 peer-checked:bg-gray-100 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-gray-300 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56L22 52"
                      stroke="#5D4037"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M22 52C20 49 16 50 14 53C16 55 20 54 22 52Z" fill="#5D4037"></path>
                    <path d="M22 52C24 49 28 50 30 53C28 55 24 54 22 52Z" fill="#4E342E"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">很差</span>
              </div>
            </label>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mt-6">
          <!-- 運動前心情（笑臉圖示） -->
          <div class="form-group">
            <label for="moodBefore" class="block text-sm font-medium text-gray-700 mb-1"
              >運動前心情（1–10 分）</label
            >
            <div
              class="input-with-icon border-pink-200 focus-within:border-pink-500 focus-within:shadow-pink-100 relative group"
            >
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-4 h-4 text-pink-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <select id="moodBefore" class="w-full p-2 pl-8">
                <option value="">請選擇</option>
                <option value="1">1 (極差)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10 (極好)</option>
              </select>
            </div>
            <p class="text-xs text-gray-500 mt-1">分數越高代表心情越好</p>
          </div>

          <!-- 運動前一分鐘心跳次數 (使用 Lucide Activity icon) -->
          <div class="form-group">
            <label for="heartRateBefore" class="block text-sm font-medium text-gray-700 mb-1"
              >運動前一分鐘心跳次數</label
            >
            <div class="input-with-icon group relative">
              <!-- 使用者提供的心跳圖示 -->
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-activity w-4 h-4 text-rose-400"
                  aria-hidden="true"
                >
                  <path
                    d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"
                  ></path>
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input
                type="number"
                id="heartRateBefore"
                min="0"
                placeholder="78"
                class="w-full p-2 text-base pl-8"
              />
              <span class="unit">bpm</span>
            </div>
          </div>

          <!-- 運動前步數 (使用 Lucide Footprints icon) -->
          <div class="form-group">
            <label for="stepsBefore" class="block text-sm font-medium text-gray-700 mb-1"
              >運動前步數</label
            >
            <div class="input-with-icon group relative">
              <!-- 使用者提供的步數圖示 -->
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-footprints w-4 h-4 text-purple-400"
                  aria-hidden="true"
                >
                  <path
                    d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"
                  ></path>
                  <path
                    d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"
                  ></path>
                  <path d="M16 17h4"></path>
                  <path d="M4 13h4"></path>
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input
                type="number"
                id="stepsBefore"
                min="0"
                placeholder="運動前的步數"
                class="w-full p-2 text-base pl-8"
              />
            </div>
          </div>
        </div>

        <!-- 痛感等級選擇 -->
        <div class="form-group mt-6 col-span-full">
          <label class="block text-sm font-medium text-gray-700 mb-2">頭痛程度</label>

          <div class="icon-radio-group flex justify-start space-x-2 sm:space-x-4">
            <!-- 不痛 0 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelBefore" value="不痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#86efac] peer-checked:bg-[#dcfce7] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#f0fdf4] transition-colors"
                >
                  <!-- 你可以換成自己的不痛 SVG -->
                  <img src="assets/img/icon-pain-1.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">不痛</span>
                <div class="text-[10px] text-green-700 mt-1 bg-green-100 px-2 py-0.5 rounded-full">
                  0
                </div>
              </div>
            </label>

            <!-- 小痛 1–3 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelBefore" value="小痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fde047] peer-checked:bg-[#fef9c3] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fefce8] transition-colors"
                >
                  <!-- 小痛 SVG -->
                  <img src="assets/img/icon-pain-2.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">小痛</span>
                <div
                  class="text-[10px] text-yellow-700 mt-1 bg-yellow-100 px-2 py-0.5 rounded-full"
                >
                  1–3
                </div>
              </div>
            </label>

            <!-- 中痛 4–6 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelBefore" value="中痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fdba74] peer-checked:bg-[#ffedd5] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fff7ed] transition-colors"
                >
                  <!-- 中痛 SVG -->
                  <img src="assets/img/icon-pain-3.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">中痛</span>
                <div
                  class="text-[10px] text-orange-700 mt-1 bg-orange-100 px-2 py-0.5 rounded-full"
                >
                  4–6
                </div>
              </div>
            </label>

            <!-- 大痛 7–10 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelBefore" value="大痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fca5a5] peer-checked:bg-[#fee2e2] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fef2f2] transition-colors"
                >
                  <!-- 大痛 SVG -->
                  <img src="assets/img/icon-pain-4.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">大痛</span>
                <div class="text-[10px] text-red-700 mt-1 bg-red-100 px-2 py-0.5 rounded-full">
                  7–10
                </div>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- 運動後紀錄 Card -->
      <div class="card bg-white rounded-xl shadow-xl p-5 sm:p-6 mb-6">
        <div class="text-xl font-normal mb-4 flex items-center gap-3 text-gray-700">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6 text-primary-indigo"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
            />
          </svg>
          運動後紀錄
          <span class="text-xs px-3 py-1 bg-indigo-100 text-primary-indigo font-medium rounded-full"
            >After</span
          >
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4">
          <!-- 這週第幾次有氧慢跑 (跑步人圖示 - 不變) -->
          <div class="form-group">
            <label for="runIndex" class="block text-sm font-medium text-gray-700 mb-1"
              >這週第幾次有氧慢跑</label
            >
            <div
              class="input-with-icon border-indigo-200 focus-within:border-primary-indigo focus-within:shadow-indigo-100 relative group"
            >
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M13 7l5 5m0 0l-5 5m5-5H1m0 0l5 5m-5-5l5-5"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <select id="runIndex" class="w-full p-2 pl-8">
                <option value="">請選擇</option>
                <option value="第1次">第1次</option>
                <option value="第2次">第2次</option>
                <option value="第3次">第3次</option>
                <option value="第4次">第4次</option>
                <option value="第5次">第5次</option>
                <option value="第6次">第6次</option>
                <option value="第7次">第7次</option>
                <option value="第8次">第8次</option>
              </select>
            </div>
          </div>

          <!-- 運動是否有分段進行 (不變) -->
          <div class="form-group">
            <label class="block text-sm font-medium text-gray-700 mb-1">運動是否有分段進行</label>
            <div class="radio-group flex gap-4 mt-2 h-10 items-center" id="segmentedGroup">
              <label class="inline-flex items-center cursor-pointer">
                <input
                  type="radio"
                  name="segmented"
                  value="有"
                  class="form-radio h-4 w-4 text-primary-indigo focus:ring-primary-indigo"
                />
                <span class="ml-2 text-sm text-gray-700">有</span>
              </label>
              <label class="inline-flex items-center cursor-pointer">
                <input
                  type="radio"
                  name="segmented"
                  value="沒有"
                  class="form-radio h-4 w-4 text-primary-indigo focus:ring-primary-indigo"
                />
                <span class="ml-2 text-sm text-gray-700">沒有</span>
              </label>
            </div>
          </div>

          <!-- 分段進行後，是否有完成？ (不變) -->
          <div class="form-group">
            <label class="block text-sm font-medium text-gray-700 mb-1"
              >分段進行後，是否有完成？</label
            >
            <div class="radio-group flex gap-4 mt-2 h-10 items-center" id="segmentedDoneGroup">
              <label class="inline-flex items-center cursor-pointer">
                <input
                  type="radio"
                  name="segmentedDone"
                  value="有"
                  class="form-radio h-4 w-4 text-primary-indigo focus:ring-primary-indigo"
                />
                <span class="ml-2 text-sm text-gray-700">有</span>
              </label>
              <label class="inline-flex items-center cursor-pointer">
                <input
                  type="radio"
                  name="segmentedDone"
                  value="沒有"
                  class="form-radio h-4 w-4 text-primary-indigo focus:ring-primary-indigo"
                />
                <span class="ml-2 text-sm text-gray-700">沒有</span>
              </label>
              <label class="inline-flex items-center cursor-pointer">
                <input
                  type="radio"
                  name="segmentedDone"
                  value="不適用"
                  class="form-radio h-4 w-4 text-primary-indigo focus:ring-primary-indigo"
                />
                <span class="ml-2 text-sm text-gray-700">不適用</span>
              </label>
            </div>
            <p class="text-xs text-gray-500 mt-1">若沒分段，將自動選擇「不適用」</p>
          </div>
        </div>

        <!-- 運動後身體狀況：使用圖示 Radio Group (不變) -->
        <div class="form-group mt-6 col-span-full">
          <label class="block text-sm font-medium text-gray-700 mb-2">運動後身體狀況</label>
          <div
            id="bodyStatusAfterGroup"
            class="icon-radio-group flex justify-start space-x-2 sm:space-x-4"
          >
            <!-- 非常好 (綠色) -->
            <label for="status-after-1" class="cursor-pointer group">
              <input
                type="radio"
                id="status-after-1"
                name="bodyStatusAfter"
                value="非常好"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-green-600 peer-checked:bg-green-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-green-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 34 40 32 28"
                      stroke="#4CAF50"
                      stroke-width="4"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 28C26 20 14 22 10 28C14 34 26 32 32 28Z" fill="#4CAF50"></path>
                    <path d="M32 28C38 20 50 22 54 28C50 34 38 32 32 28Z" fill="#4CAF50"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">非常好</span>
              </div>
            </label>

            <!-- 良好 (淺綠色) -->
            <label for="status-after-2" class="cursor-pointer group">
              <input
                type="radio"
                id="status-after-2"
                name="bodyStatusAfter"
                value="良好"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-lime-600 peer-checked:bg-lime-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-lime-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-lime-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 33 42 32 32"
                      stroke="#8BC34A"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 32C27 26 18 27 15 31C18 35 27 34 32 32Z" fill="#8BC34A"></path>
                    <path d="M32 32C37 26 46 27 49 31C46 35 37 34 32 32Z" fill="#8BC34A"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">良好</span>
              </div>
            </label>

            <!-- 一般 (黃綠色) -->
            <label for="status-after-3" class="cursor-pointer group">
              <input
                type="radio"
                id="status-after-3"
                name="bodyStatusAfter"
                value="一般"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-yellow-500 peer-checked:bg-yellow-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-yellow-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 30 44 32 36"
                      stroke="#CDDC39"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M32 36C28 32 20 34 18 38C20 41 28 40 32 36Z" fill="#CDDC39"></path>
                    <path d="M32 36C36 32 44 34 46 38C44 41 36 40 32 36Z" fill="#CDDC39"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">一般</span>
              </div>
            </label>

            <!-- 較差 (橘色) -->
            <label for="status-after-4" class="cursor-pointer group">
              <input
                type="radio"
                id="status-after-4"
                name="bodyStatusAfter"
                value="較差"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-orange-600 peer-checked:bg-orange-50 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-orange-200 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56C32 56 26 48 28 40"
                      stroke="#FFC107"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M28 40C24 38 18 42 17 45C20 47 26 44 28 40Z" fill="#FFC107"></path>
                    <path d="M28 40C32 38 38 42 39 45C36 47 30 44 28 40Z" fill="#FF9800"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">較差</span>
              </div>
            </label>

            <!-- 很差 (深棕色/灰色) -->
            <label for="status-after-5" class="cursor-pointer group">
              <input
                type="radio"
                id="status-after-5"
                name="bodyStatusAfter"
                value="很差"
                class="hidden peer"
              />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-gray-500 peer-checked:bg-gray-100 shadow-sm hover:shadow-md"
              >
                <div
                  class="w-8 h-8 sm:w-14 sm:h-14 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-gray-300 transition-colors"
                >
                  <svg
                    width="64"
                    height="64"
                    viewBox="0 0 64 64"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-10 h-10 sm:w-12 sm:h-12 drop-shadow-sm"
                  >
                    <ellipse cx="32" cy="56" rx="12" ry="4" fill="#795548"></ellipse>
                    <path
                      d="M32 56L22 52"
                      stroke="#5D4037"
                      stroke-width="3"
                      stroke-linecap="round"
                    ></path>
                    <path d="M22 52C20 49 16 50 14 53C16 55 20 54 22 52Z" fill="#5D4037"></path>
                    <path d="M22 52C24 49 28 50 30 53C28 55 24 54 22 52Z" fill="#4E342E"></path>
                  </svg>
                </div>
                <span class="text-xs sm:text-sm text-gray-700">很差</span>
              </div>
            </label>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mt-6">
          <!-- 最後生日歌狀況 (麥克風圖示 - 不變) -->
          <div class="form-group">
            <label for="birthdaySong" class="block text-sm font-medium text-gray-700 mb-1"
              >最後生日歌狀況</label
            >
            <div
              class="input-with-icon border-indigo-200 focus-within:border-primary-indigo focus-within:shadow-indigo-100 relative group"
            >
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <select id="birthdaySong" class="w-full p-2 pl-8">
                <option value="">請選擇</option>
                <option value="輕鬆唱完">輕鬆唱完</option>
                <option value="無法唱歌用唸的">無法唱歌用唸的</option>
                <option value="無法唱歌只能兩三句話">無法唱歌只能兩三句話</option>
                <option value="喘到無法說話">喘到無法說話</option>
              </select>
            </div>
          </div>

          <!-- 全程運動總時間（分鐘） (碼表圖示 - 不變) -->
          <div class="form-group">
            <label for="totalMinutes" class="block text-sm font-medium text-gray-700 mb-1"
              >全程運動總時間（分鐘）</label
            >
            <div
              class="input-with-icon border-indigo-200 focus-within:border-primary-indigo focus-within:shadow-indigo-100 relative group"
            >
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 text-indigo-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input
                type="number"
                id="totalMinutes"
                min="0"
                placeholder="30"
                class="w-full p-2 text-base pl-8"
              />
              <span class="unit text-indigo-400">分</span>
            </div>
          </div>

          <!-- 運動後一分鐘心跳次數 (使用 Lucide Activity icon) -->
          <div class="form-group">
            <label for="heartRateAfter" class="block text-sm font-medium text-gray-700 mb-1"
              >運動後一分鐘心跳次數</label
            >
            <div class="input-with-icon group relative">
              <!-- 使用者提供的心跳圖示 -->
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-activity w-4 h-4 text-rose-400"
                  aria-hidden="true"
                >
                  <path
                    d="M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"
                  ></path>
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input
                type="number"
                id="heartRateAfter"
                min="0"
                placeholder="120"
                class="w-full p-2 text-base pl-8"
              />
              <span class="unit">bpm</span>
            </div>
          </div>

          <!-- 運動後心情 (笑臉圖示) -->
          <div class="form-group">
            <label for="moodAfter" class="block text-sm font-medium text-gray-700 mb-1"
              >運動後心情（1–10 分）</label
            >
            <div
              class="input-with-icon border-pink-200 focus-within:border-pink-500 focus-within:shadow-pink-100 relative group"
            >
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-4 h-4 text-pink-400"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                  />
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <select id="moodAfter" class="w-full p-2 pl-8">
                <option value="">請選擇</option>
                <option value="1">1 (極差)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10 (極好)</option>
              </select>
            </div>
          </div>

          <!-- 運動後步數 (使用 Lucide Footprints icon) -->
          <div class="form-group">
            <label for="stepsAfter" class="block text-sm font-medium text-gray-700 mb-1"
              >運動後步數</label
            >
            <div class="input-with-icon group relative">
              <!-- 使用者提供的步數圖示 -->
              <div
                class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-50 group-focus-within:opacity-100 group-focus-within:scale-110 transition-all"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-footprints w-4 h-4 text-purple-400"
                  aria-hidden="true"
                >
                  <path
                    d="M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z"
                  ></path>
                  <path
                    d="M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z"
                  ></path>
                  <path d="M16 17h4"></path>
                  <path d="M4 13h4"></path>
                </svg>
              </div>
              <!-- 增加至 pl-12 -->
              <input
                type="number"
                id="stepsAfter"
                min="0"
                placeholder="運動後的步數"
                class="w-full p-2 text-base pl-8"
              />
            </div>
          </div>
        </div>

        <!-- 痛感等級選擇 -->
        <div class="form-group mt-6 col-span-full">
          <label class="block text-sm font-medium text-gray-700 mb-2">頭痛程度</label>

          <div class="icon-radio-group flex justify-start space-x-2 sm:space-x-4">
            <!-- 不痛 0 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelAfter" value="不痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#86efac] peer-checked:bg-[#dcfce7] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#f0fdf4] transition-colors"
                >
                  <!-- 你可以換成自己的不痛 SVG -->
                  <img src="assets/img/icon-pain-1.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">不痛</span>
                <div class="text-[10px] text-green-700 mt-1 bg-green-100 px-2 py-0.5 rounded-full">
                  0
                </div>
              </div>
            </label>

            <!-- 小痛 1–3 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelAfter" value="小痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fde047] peer-checked:bg-[#fef9c3] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fefce8] transition-colors"
                >
                  <!-- 小痛 SVG -->
                  <img src="assets/img/icon-pain-2.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">小痛</span>
                <div
                  class="text-[10px] text-yellow-700 mt-1 bg-yellow-100 px-2 py-0.5 rounded-full"
                >
                  1–3
                </div>
              </div>
            </label>

            <!-- 中痛 4–6 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelAfter" value="中痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fdba74] peer-checked:bg-[#ffedd5] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fff7ed] transition-colors"
                >
                  <!-- 中痛 SVG -->
                  <img src="assets/img/icon-pain-3.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">中痛</span>
                <div
                  class="text-[10px] text-orange-700 mt-1 bg-orange-100 px-2 py-0.5 rounded-full"
                >
                  4–6
                </div>
              </div>
            </label>

            <!-- 大痛 7–10 -->
            <label class="cursor-pointer group">
              <input type="radio" name="painLevelAfter" value="大痛" class="hidden peer" />
              <div
                class="p-2 rounded-xl text-center transition-all border-2 border-gray-200 peer-checked:border-[#fca5a5] peer-checked:bg-[#fee2e2] shadow-sm hover:shadow-md"
              >
                <div
                  class="w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-1 group-hover:bg-[#fef2f2] transition-colors"
                >
                  <!-- 大痛 SVG -->
                  <img src="assets/img/icon-pain-4.svg" class="w-10 h-10 md:w-12 md:h-12" />
                </div>
                <span class="text-sm text-gray-700 font-semibold">大痛</span>
                <div class="text-[10px] text-red-700 mt-1 bg-red-100 px-2 py-0.5 rounded-full">
                  7–10
                </div>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- 按鈕區塊 -->
       <div class="button-row mt-6">
  <a href="https://docs.google.com/spreadsheets/d/1ws2f3wpwveQbjwHlW9azFj8Ba738n0052VqAp9_s5t4/edit?gid=0#gid=0" class="btn-view">查看資料表</a>
  <button class="btn-secondary">清除重填</button>
  <button class="btn-primary">送出記錄</button>
</div>



      <div id="status" class="status-message text-center mt-4 text-sm font-medium"></div>
    </div>

    <script>
      const $ = (id) => document.getElementById(id);

      function getRadioValue(name) {
        const checked = document.querySelector(`input[name="${name}"]:checked`);
        return checked ? checked.value : '';
      }

      function setStatus(message, isError = false) {
        const el = $('status');
        el.textContent = message;
        el.className =
          'status-message text-center mt-4 text-sm font-medium ' +
          (isError ? 'text-red-600' : 'text-green-600');
      }

      function clearForm() {
        // 清除 input 和 select
        document
          .querySelectorAll('input[type="number"], input[type="datetime-local"], select')
          .forEach((el) => (el.value = ''));

        // 清除所有 radio buttons
        document.querySelectorAll('input[type=radio]').forEach((el) => {
          el.checked = false;
        });

        setStatus('');
        setInitialDateTime();
      }

      // 運動是否有分段 → 自動調整「分段進行後，是否有完成？」的狀態
      document.getElementById('segmentedGroup').addEventListener('change', () => {
        const segmented = getRadioValue('segmented');
        // 清空所有 segmentedDone 選項
        document
          .querySelectorAll('input[name="segmentedDone"]')
          .forEach((el) => (el.checked = false));

        if (segmented === '沒有') {
          // 如果沒有分段，預設選取「不適用」
          const naRadio = document.querySelector('input[name="segmentedDone"][value="不適用"]');
          if (naRadio) naRadio.checked = true;
        }
        // 如果 segmented === '有'，則保持 segmentedDone 為空，等待使用者選擇
      });

      // 設定 datetime-local 欄位為現在時間的功能
      function setInitialDateTime() {
        const dateInput = $('exerciseDate');
        if (dateInput) {
          const now = new Date();
          // 調整時區 (getTimezoneOffset) 並轉成 ISO 格式 (YYYY-MM-DDTHH:mm)
          now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
          const currentDateTime = now.toISOString().slice(0, 16);
          dateInput.value = currentDateTime;
        }
        // 確保在頁面載入時，segmentedDone 也沒有被選取 (clearForm 的效果)
        document
          .querySelectorAll('input[name="segmentedDone"]')
          .forEach((el) => (el.checked = false));
      }

      // 提交資料
      document.getElementById('submitBtn').addEventListener('click', async () => {
        setStatus('');

        const payload = {
          exerciseDate: $('exerciseDate').value,
          bodyStatusBefore: getRadioValue('bodyStatusBefore'),
          moodBefore: $('moodBefore').value,
          heartRateBefore: $('heartRateBefore').value,
          stepsBefore: $('stepsBefore').value,

          runIndex: $('runIndex').value,
          segmented: getRadioValue('segmented'),
          segmentedDone: getRadioValue('segmentedDone'),
          bodyStatusAfter: getRadioValue('bodyStatusAfter'),
          birthdaySong: $('birthdaySong').value,
          totalMinutes: $('totalMinutes').value,
          heartRateAfter: $('heartRateAfter').value,
          moodAfter: $('moodAfter').value,
          stepsAfter: $('stepsAfter').value,

          // ⭐ 新增：運動前痛感
          painLevelBefore: getRadioValue('painLevelBefore'),

          // ⭐ 新增：運動後痛感
          painLevelAfter: getRadioValue('painLevelAfter'),
        };

        // 驗證邏輯
        if (!payload.exerciseDate) {
          setStatus('請先選擇「運動日期與時間」。', true);
          return;
        }
        if (!payload.bodyStatusBefore) {
          setStatus('請先填寫「運動前身體狀況」。', true);
          return;
        }
        if (!payload.moodBefore) {
          setStatus('請先填寫「運動前心情」。', true);
          return;
        }
        if (!payload.runIndex) {
          setStatus('請先填寫「這週第幾次有氧慢跑」。', true);
          return;
        }
        // 檢查 segmentedDone 是否已選取 (除非 segmented 設為「有」但未選)
        if (payload.segmented === '有' && !payload.segmentedDone) {
          setStatus('請選擇「分段進行後，是否有完成？」（有/沒有）。', true);
          return;
        }
        if (!payload.bodyStatusAfter) {
          setStatus('請先填寫「運動後身體狀況」。', true);
          return;
        }
        if (!payload.moodAfter) {
          setStatus('請先填寫「運動後心情」。', true);
          return;
        }

        try {
          setStatus('資料送出中，請稍候…');

          const res = await fetch(WEB_APP_URL, {
            method: 'POST',
            // 不加 headers 避免 CORS preflight 錯誤
            body: JSON.stringify(payload),
          });

          // 檢查 HTTP 狀態碼
          if (!res.ok) {
            throw new Error(`HTTP Error status: ${res.status}`);
          }

          const json = await res.json();

          if (json.result === 'success') {
            setStatus('✅ 已完成記錄，辛苦啦！', false);
            clearForm(); // 送出成功後清空表單
          } else {
            // GAS 內部回傳 error
            setStatus(`送出失敗：${json.error || '後端錯誤'}，請稍後再試一次。`, true);
          }
        } catch (err) {
          console.error(err);
          setStatus('❌ 無法連線到記錄表，請檢查網路或 Web App 設定。', true);
        }
      });

      document.getElementById('resetBtn').addEventListener('click', () => clearForm());

      // 網頁載入時，自動填入現在時間，並確保所有選項都是空的
      window.addEventListener('load', clearForm);
    </script>
  </body>
</html>
